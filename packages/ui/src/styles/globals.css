@import "tailwindcss";

/* 显式扫描 UI 组件文件，确保 Dialog 等组件中的任意值类名被生成 */
@source "../**/*.tsx";
@source "../**/*.ts";

/* CSS Variables Theme System for Tailwind v4 */
@theme {
  /* Primary colors */
  --color-primary: hsl(var(--primary));
  --color-primary-foreground: hsl(var(--primary-foreground));

  /* Secondary colors */
  --color-secondary: hsl(var(--secondary));
  --color-secondary-foreground: hsl(var(--secondary-foreground));

  /* Accent colors */
  --color-accent: hsl(var(--accent));
  --color-accent-foreground: hsl(var(--accent-foreground));

  /* Link colors - 高对比度 */
  --color-link: hsl(var(--link));
  --color-link-hover: hsl(var(--link-hover));
  --color-link-active: hsl(var(--link-active));

  /* Background colors */
  --color-background: hsl(var(--background));
  --color-foreground: hsl(var(--foreground));

  /* Muted colors */
  --color-muted: hsl(var(--muted));
  --color-muted-foreground: hsl(var(--muted-foreground));

  /* Card colors */
  --color-card: hsl(var(--card));
  --color-card-foreground: hsl(var(--card-foreground));

  /* Popover colors */
  --color-popover: hsl(var(--popover));
  --color-popover-foreground: hsl(var(--popover-foreground));

  /* Border and input */
  --color-border: hsl(var(--border));
  --color-input: hsl(var(--input));
  --color-ring: hsl(var(--ring));

  /* Destructive colors */
  --color-destructive: hsl(var(--destructive));
  --color-destructive-foreground: hsl(var(--destructive-foreground));

  /* Border radius */
  --radius-lg: var(--radius);
  --radius-md: calc(var(--radius) - 2px);
  --radius-sm: calc(var(--radius) - 4px);

  /* App-specific custom properties */
  --color-app-primary: hsl(var(--app-primary, var(--primary)));
  --app-radius: var(--radius);
}

/* Base layer styles */
@layer base {
  :root {
    --background: 0 0% 100%;
    --foreground: 222.2 84% 4.9%;
    --card: 0 0% 100%;
    --card-foreground: 222.2 84% 4.9%;
    --popover: 0 0% 100%;
    --popover-foreground: 222.2 84% 4.9%;
    --primary: 222.2 47.4% 11.2%;
    --primary-foreground: 210 40% 98%;
    --secondary: 210 40% 96.1%;
    --secondary-foreground: 222.2 47.4% 11.2%;
    --muted: 210 40% 96.1%;
    --muted-foreground: 215.4 16.3% 46.9%;
    --accent: 210 40% 96.1%;
    --accent-foreground: 222.2 47.4% 11.2%;
    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 210 40% 98%;
    --border: 214.3 31.8% 91.4%;
    --input: 214.3 31.8% 91.4%;
    --ring: 222.2 84% 4.9%;
    --radius: 0.5rem;

    /* Link colors - 高对比度蓝色 */
    --link: 217 91% 45%;
    --link-hover: 217 91% 35%;
    --link-active: 217 91% 30%;

    /* App-specific defaults */
    --app-primary: 222.2 47.4% 11.2%;
  }

  /* Dark mode - apply to :root when .dark class is present on html element */
  :root.dark,
  .dark {
    --background: 222.2 84% 4.9%;
    --foreground: 210 40% 98%;
    --card: 222.2 84% 4.9%;
    --card-foreground: 210 40% 98%;
    --popover: 222.2 84% 4.9%;
    --popover-foreground: 210 40% 98%;
    --primary: 210 40% 98%;
    --primary-foreground: 222.2 47.4% 11.2%;
    --secondary: 217.2 32.6% 17.5%;
    --secondary-foreground: 210 40% 98%;
    --muted: 217.2 32.6% 17.5%;
    --muted-foreground: 215 20.2% 65.1%;
    --accent: 217.2 32.6% 17.5%;
    --accent-foreground: 210 40% 98%;
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 210 40% 98%;
    --border: 217.2 32.6% 17.5%;
    --input: 217.2 32.6% 17.5%;
    --ring: 212.7 26.8% 83.9%;

    /* Link colors - 高对比度亮蓝色 */
    --link: 210 100% 65%;
    --link-hover: 210 100% 75%;
    --link-active: 210 100% 55%;

    /* App-specific dark defaults */
    --app-primary: 210 40% 98%;
  }

  * {
    border-color: theme(colors.border);
  }

  html,
  body {
    height: 100%;
    overflow: hidden;
  }

  body {
    background-color: theme(colors.background);
    color: theme(colors.foreground);
    font-feature-settings: "rlig" 1, "calt" 1;
  }

  #root {
    height: 100%;
    overflow: hidden;
  }

  /* 主题切换过渡动画 */
  :root {
    --theme-transition-duration: 300ms;
  }

  /* 应用过渡到所有颜色相关属性 */
  html,
  body,
  * {
    transition:
      background-color var(--theme-transition-duration) ease-in-out,
      border-color var(--theme-transition-duration) ease-in-out,
      color var(--theme-transition-duration) ease-in-out,
      fill var(--theme-transition-duration) ease-in-out,
      stroke var(--theme-transition-duration) ease-in-out,
      box-shadow var(--theme-transition-duration) ease-in-out;
  }

  /* 禁用某些元素的过渡（如需要即时响应的元素） */
  .no-theme-transition,
  .no-theme-transition * {
    transition: none !important;
  }

  /* 主题切换时的全局遮罩动画（可选） */
  .theme-transitioning::before {
    content: "";
    position: fixed;
    inset: 0;
    background: radial-gradient(circle at center, transparent 0%, hsl(var(--background) / 0.3) 100%);
    pointer-events: none;
    z-index: 9999;
    animation: theme-fade 300ms ease-out forwards;
  }

  @keyframes theme-fade {
    from {
      opacity: 1;
    }
    to {
      opacity: 0;
    }
  }
}

/* Component layer */
@layer components {
  /* Skeleton animation */
  .skeleton {
    animation: skeleton-pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
  }

  @keyframes skeleton-pulse {
    0%, 100% {
      opacity: 1;
    }
    50% {
      opacity: 0.5;
    }
  }

  /* Streaming text cursor */
  .streaming-cursor::after {
    content: "▌";
    animation: cursor-blink 1s step-end infinite;
    color: theme(colors.primary);
  }

  @keyframes cursor-blink {
    0%, 100% {
      opacity: 1;
    }
    50% {
      opacity: 0;
    }
  }

  /* Action button styles */
  .action-button {
    transition: all 0.2s ease-in-out;
  }

  .action-button:hover {
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  }
}

/* Utility layer */
@layer utilities {
  .scrollbar-thin {
    scrollbar-width: thin;
    scrollbar-color: theme(colors.muted) transparent;
  }

  .scrollbar-thin::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }

  .scrollbar-thin::-webkit-scrollbar-track {
    background: transparent;
  }

  .scrollbar-thin::-webkit-scrollbar-thumb {
    background-color: theme(colors.muted);
    border-radius: 3px;
  }
}

/* tailwindcss-animate 兼容：为 Radix UI 组件提供 animate-in/animate-out 动画支持 */
/* 使用 @utility 以支持 data-[state=open]:animate-in 等 variant 用法 */

@keyframes enter {
  from {
    opacity: var(--tw-enter-opacity, 1);
    transform: translate(
        var(--tw-enter-translate-x, 0),
        var(--tw-enter-translate-y, 0)
      )
      scale(var(--tw-enter-scale, 1))
      rotate(var(--tw-enter-rotate, 0));
  }
}

@keyframes exit {
  to {
    opacity: var(--tw-exit-opacity, 1);
    transform: translate(
        var(--tw-exit-translate-x, 0),
        var(--tw-exit-translate-y, 0)
      )
      scale(var(--tw-exit-scale, 1))
      rotate(var(--tw-exit-rotate, 0));
  }
}

@utility animate-in {
  animation-name: enter;
  animation-duration: var(--tw-duration, 150ms);
  animation-fill-mode: both;
}

@utility animate-out {
  animation-name: exit;
  animation-duration: var(--tw-duration, 150ms);
  animation-fill-mode: both;
}

@utility fade-in-0 {
  --tw-enter-opacity: 0;
}

@utility fade-out-0 {
  --tw-exit-opacity: 0;
}

@utility zoom-in-95 {
  --tw-enter-scale: .95;
}

@utility zoom-out-95 {
  --tw-exit-scale: .95;
}

@utility slide-in-from-top-2 {
  --tw-enter-translate-y: -0.5rem;
}

@utility slide-in-from-bottom-2 {
  --tw-enter-translate-y: 0.5rem;
}

@utility slide-in-from-left-2 {
  --tw-enter-translate-x: -0.5rem;
}

@utility slide-in-from-right-2 {
  --tw-enter-translate-x: 0.5rem;
}

@utility slide-out-to-top-2 {
  --tw-exit-translate-y: -0.5rem;
}

@utility slide-out-to-bottom-2 {
  --tw-exit-translate-y: 0.5rem;
}

@utility slide-out-to-left-2 {
  --tw-exit-translate-x: -0.5rem;
}

@utility slide-out-to-right-2 {
  --tw-exit-translate-x: 0.5rem;
}

/* Dialog 专用：从中心位置滑入/滑出（覆盖 Dialog 中使用的特殊值） */
@layer utilities {
  /* slide-in-from-left-1/2 和 slide-out-to-left-1/2 */
  .slide-in-from-left-1\/2 {
    --tw-enter-translate-x: -50%;
  }
  .slide-out-to-left-1\/2 {
    --tw-exit-translate-x: -50%;
  }
  /* slide-in-from-top-[48%] 和 slide-out-to-top-[48%] */
  .slide-in-from-top-\[48\%\] {
    --tw-enter-translate-y: -48%;
  }
  .slide-out-to-top-\[48\%\] {
    --tw-exit-translate-y: -48%;
  }
}
